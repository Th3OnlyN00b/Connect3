<!DOCTYPE html>
<html>
<head>

  <!-- Include Bootstrap -->
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

  <!-- jQuery library -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <!-- Latest compiled JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <!-- Scripts for this page -->
  <script>
    var player1 = '';
    var player2 = '';

    //Replace text on buttons with selected option
    function replacePlayer1(option, tag) {
      document.getElementById("player1DropDown").innerHTML = option + ' <b class="caret"></b>';
      player1 = tag;
    }
    function replacePlayer2(option, tag) {
      document.getElementById("player2DropDown").innerHTML = option + ' <b class="caret"></b>';
      player2 = tag;
    }

    //Processes what happens when the Play Game button is pressed
    function playGame(){
      console.log('Play Game button is pressed');

      //Make sure both players are chosen
      if(player1 == '' || player2 == ''){
        console.log('Unfilled players modal should be showing');
        $("#playersModal").modal("show");
      }
      else if(player1 == 'human' && player2 == 'human'){
        alert("Due to the configuration of the server, you will be joined as player 2 if there is an open game.");
        var newURL = "board.html?p1=human&p2=human&join=false";
        window.location.href = newURL;
      }
      else{
        var newURL = "board.html?p1=" + player1 + "&p2=" + player2 + "&join=false";
        window.location.href = newURL;
      }
    }

    function joinGame(){
      console.log('Join Game button is pressed');
      var newURL = "board.html?p1=human&p2=human&join=true";
        window.location.href = newURL;
    }
  </script>

  <!-- Our custom theme CSS -->
  <style>
  .jumbotron {
    background-color: #ff0066; /* Nice Red */
    color: #ffffff;
  }
</style>
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <div class="text-center">
    <!-- Main Content of Connect 3 Page -->
    <h1 class = "jumbotron">Connect 3</h1>

    <h2>Choose your players: </h2>

    <br />

    <!-- Player 1 -->
    <span class="dropdown">
      <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="player1DropDown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Player 1 <b class="caret"></b>
      </a>

      <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
        <li><a class="dropdown-item" onclick="replacePlayer1('Human', 'human')">Human</a></li>
        <li><a class="dropdown-item" onclick="replacePlayer1('Random', 'random')">Random</a></li>
        <li><a class="dropdown-item" onclick="replacePlayer1('Random with Auto-win', 'aw')">Random with Auto-win</a></li>
        <li><a class="dropdown-item" onclick="replacePlayer1('Minmax', 'minimax')">Minmax</a></li>
        <li><a class="dropdown-item" onclick="replacePlayer1('Pruned minmax', 'pruned-mm')">Pruned minmax</a></li>
      </ul>
    </span>

    &nbsp; vs. &nbsp;

    <!-- Player 2 -->
    <span class="dropdown">
      <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="player2DropDown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Player 2 <b class="caret"></b>
      </a>

      <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
        <li><a class="dropdown-item" onclick="replacePlayer2('Human', 'human')">Human</a></li>
        <li><a class="dropdown-item" onclick="replacePlayer2('Random', 'random')">Random</a></li>
        <li><a class="dropdown-item" onclick="replacePlayer2('Random with Auto-win', 'aw')">Random with Auto-win</a></li>
        <li><a class="dropdown-item" onclick="replacePlayer2('Minmax', 'minimax')">Minmax</a></li>
        <li><a class="dropdown-item" onclick="replacePlayer2('Pruned minmax', 'pruned-mm')">Pruned miniax</a></li>
        <li><a class="dropdown-item" onclick="replacePlayer2('Hardware', 'hw')">Hardware</a></li>
      </ul>
    </span>

    <br />

    <!-- Play Game button -->
    <br />
    <button type="button" class="btn btn-primary" onclick="playGame()">Host Game</button>
    <br />
    <br />
    <button type="button" class="btn" onclick="joinGame()">Join Game</button>

  </div>

  <!-- Modal that appears when there are not enough players -->
  <div class="modal fade" id="playersModal" role="dialog">
    <div class="modal-dialog">

      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Player(s) not chosen</h4>
        </div>
        <div class="modal-body">
          <p>In order to start a game, you must choose both players.</p>
        </div>
        <div class="modal-footer">
          <!-- Button to dismiss modal -->
          <button type="button" class="btn btn-primary" data-dismiss="modal">OK</button>
        </div>
      </div>

    </div>
  </div>

</body>
</html>
